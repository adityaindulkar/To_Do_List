<!DOCTYPE html>
<html>
<head>
    <title>Task List</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='index.css') }}">
</head>
<body>
    <header>
        <h1>TO DO List</h1>
    </header>

    <form method="POST" action="/submit">
        <input type="text" name="task" required>
        <button type="submit">Add Task</button>
    </form>

    <ol>
        {% for task in tasks_on_page %}
        <li class="task-item">
            <input type="checkbox" id="task{{ task[0] }}" onchange="deleteTask({{ task[0] }})">
            <label class="task-label" for="task{{ task[0] }}">{{ task[1] }}</label>
        </li>
        {% endfor %}
    </ol>

    <!-- <div>
        {% if page > 1 %}
        <a href="{{ url_for('index', page=page-1) }}">Previous</a>
        {% endif %}
        
        Page {{ page }} of {{ total_pages }}
        
        {% if page < total_pages %}
        <a href="{{ url_for('index', page=page+1) }}">Next</a>
        {% endif %}
    </div> -->

    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            {% if page > 1 %}
            <li class="page-item">
                <a class="page-link" href="{{ url_for('index', page=page-1) }}">Previous</a>
            </li>
            {% endif %}
            
            <li class="page-item disabled">
                    Page {{ page }} of {{ total_pages }}
            </li>
            
            {% if page < total_pages %}
            <li class="page-item">
                <a class="page-link" href="{{ url_for('index', page=page+1) }}">Next</a>
            </li>
            {% endif %}
        </ul>
    </nav>

    <script>
        function deleteTask(task_id) {
            fetch('/delete/' + task_id, { method: 'POST' })
                .then(() => {
                    const li = document.getElementById('task' + task_id).closest('li');
                    li.remove();
                });
        }
    </script>
</body>
</html>
